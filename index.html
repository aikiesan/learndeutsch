<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>LearnDeutsch - Master German Vocabulary</title>
    <meta name="description" content="Learn German vocabulary the fun way with interactive quizzes, typing practice, and gamified lessons">

    <!-- Mobile App Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="LearnDeutsch">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#E8A87C">

    <!-- Favicon - German flag colors -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'><rect y='0' width='32' height='10.67' fill='%23000'/><rect y='10.67' width='32' height='10.67' fill='%23DD0000'/><rect y='21.33' width='32' height='10.67' fill='%23FFCC00'/></svg>">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'><rect y='0' width='32' height='10.67' fill='%23000'/><rect y='10.67' width='32' height='10.67' fill='%23DD0000'/><rect y='21.33' width='32' height='10.67' fill='%23FFCC00'/></svg>">

    <!-- Prevent zoom on input focus (iOS) -->
    <meta name="format-detection" content="telephone=no">

    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/themes.css">
    <link rel="stylesheet" href="css/animations.css">
    <link rel="stylesheet" href="css/landing.css">
    <link rel="stylesheet" href="css/cozy.css">
    <link rel="stylesheet" href="css/mobile.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <div id="app">
        <!-- Compact Header -->
        <header class="header compact-header">
            <div class="container">
                <div class="header-content">
                    <div class="logo">
                        <span class="logo-icon">üá©üá™</span>
                        <h1>LearnDeutsch</h1>
                    </div>

                    <div class="user-stats">
                        <button class="speech-toggle" id="speech-toggle" title="Toggle voice pronunciation" aria-label="Toggle voice pronunciation">
                            <span class="speech-icon" id="speech-icon" aria-hidden="true">üîä</span>
                        </button>
                        <div class="stat stat-timer" id="session-timer-stat" role="timer" aria-label="Session time">
                            <span class="stat-icon" aria-hidden="true">‚è±Ô∏è</span>
                            <span class="stat-value" id="session-timer">00:00</span>
                        </div>
                        <div class="stat stat-level" aria-label="Current level">
                            <span class="stat-icon" aria-hidden="true">‚≠ê</span>
                            <span class="stat-value" id="user-level">1</span>
                        </div>
                        <div class="stat stat-xp" aria-label="Experience points">
                            <span class="stat-icon" aria-hidden="true">‚ú®</span>
                            <span class="stat-value" id="user-xp">0</span>
                            <span class="stat-label">XP</span>
                        </div>
                        <div class="stat stat-streak" aria-label="Current streak">
                            <span class="streak-fire" id="streak-fire" aria-hidden="true">üî•</span>
                            <span class="stat-value" id="user-streak">0</span>
                        </div>
                    </div>
                </div>

                <div class="progress-bar">
                    <div class="progress-fill" id="level-progress"></div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main">
            <div class="container">

                <!-- Landing / Dashboard Section -->
                <section id="dashboard" class="section active">

                    <!-- Hero Section -->
                    <div class="hero-section">
                        <div class="hero-content">
                            <p class="motivational-phrase" id="motivational-phrase">√úbung macht den Meister!</p>
                            <h2 class="hero-title">
                                <span class="hero-wave">üëã</span>
                                <span id="hero-greeting">Ready to learn German?</span>
                            </h2>
                            <p class="hero-subtitle" id="hero-subtitle">Build your vocabulary one word at a time</p>
                        </div>

                        <!-- Main CTA - Adaptive based on last activity -->
                        <div class="main-cta">
                            <button class="cta-button pulse-glow" id="start-main-quiz">
                                <span class="cta-icon" id="cta-icon">üéØ</span>
                                <span class="cta-text">
                                    <span class="cta-title" id="cta-title">Start Learning</span>
                                    <span class="cta-desc" id="cta-desc">Quick vocabulary quiz</span>
                                </span>
                                <span class="cta-arrow">‚Üí</span>
                            </button>
                        </div>
                    </div>

                    <!-- Learning Paths -->
                    <div class="learning-paths">
                        <h3 class="paths-title">Choose How to Study</h3>

                        <div class="paths-grid">
                            <!-- Quick Quiz -->
                            <button class="path-card featured" id="quick-quiz">
                                <div class="path-icon-wrap">
                                    <span class="path-icon">üéØ</span>
                                    <span class="path-badge">Popular</span>
                                </div>
                                <h4 class="path-title">Quick Quiz</h4>
                                <p class="path-desc">Tap the correct answer from 4 options</p>
                                <div class="path-meta">
                                    <span class="path-time">‚ö° 2-3 min</span>
                                    <span class="path-xp">+80 XP</span>
                                </div>
                            </button>

                            <!-- Sentence Builder -->
                            <button class="path-card" id="sentence-builder">
                                <div class="path-icon-wrap">
                                    <span class="path-icon">üß©</span>
                                    <span class="path-badge new-badge">New</span>
                                </div>
                                <h4 class="path-title">Sentence Builder</h4>
                                <p class="path-desc">Click words to build German sentences</p>
                                <div class="path-meta">
                                    <span class="path-time">‚è±Ô∏è 3-5 min</span>
                                    <span class="path-xp">+100 XP</span>
                                </div>
                            </button>

                            <!-- Typing Practice -->
                            <button class="path-card" id="typing-practice">
                                <div class="path-icon-wrap">
                                    <span class="path-icon">‚å®Ô∏è</span>
                                </div>
                                <h4 class="path-title">Typing Practice</h4>
                                <p class="path-desc">Type German words from English</p>
                                <div class="path-meta">
                                    <span class="path-time">‚è±Ô∏è 5 min</span>
                                    <span class="path-xp">+120 XP</span>
                                </div>
                            </button>

                            <!-- Listening Practice -->
                            <button class="path-card" id="listening-practice">
                                <div class="path-icon-wrap">
                                    <span class="path-icon">üéß</span>
                                    <span class="path-badge new-badge">New</span>
                                </div>
                                <h4 class="path-title">Listening</h4>
                                <p class="path-desc">Hear a word, type what you hear</p>
                                <div class="path-meta">
                                    <span class="path-time">‚è±Ô∏è 3 min</span>
                                    <span class="path-xp">+90 XP</span>
                                </div>
                            </button>

                            <!-- Flashcards -->
                            <button class="path-card" id="review-vocabulary">
                                <div class="path-icon-wrap">
                                    <span class="path-icon">üìö</span>
                                </div>
                                <h4 class="path-title">Flashcards</h4>
                                <p class="path-desc">Review with spaced repetition</p>
                                <div class="path-meta">
                                    <span class="path-time">‚è±Ô∏è 3-5 min</span>
                                    <span class="path-xp">+60 XP</span>
                                </div>
                            </button>

                            <!-- Grammar -->
                            <button class="path-card" id="grammar-practice">
                                <div class="path-icon-wrap">
                                    <span class="path-icon">üìù</span>
                                </div>
                                <h4 class="path-title">Grammar</h4>
                                <p class="path-desc">Master der, die, das articles</p>
                                <div class="path-meta">
                                    <span class="path-time">‚è±Ô∏è 3 min</span>
                                    <span class="path-xp">+50 XP</span>
                                </div>
                            </button>

                            <!-- Match Pairs -->
                            <button class="path-card" id="match-pairs">
                                <div class="path-icon-wrap">
                                    <span class="path-icon">üé¥</span>
                                    <span class="path-badge new-badge">New</span>
                                </div>
                                <h4 class="path-title">Match Pairs</h4>
                                <p class="path-desc">Memory game: match German ‚Üî English</p>
                                <div class="path-meta">
                                    <span class="path-time">‚è±Ô∏è 2-4 min</span>
                                    <span class="path-xp">+90 XP</span>
                                </div>
                            </button>
                        </div>
                    </div>

                    <!-- Challenge Modes Banner -->
                    <div class="challenge-modes-banner" id="challenge-modes-banner">
                        <h3 class="challenge-title">üéÆ Challenge Modes</h3>
                        <div class="challenge-modes-grid">
                            <button class="challenge-mode-card" id="timed-challenge">
                                <span class="challenge-icon">‚è±Ô∏è</span>
                                <span class="challenge-name">Timed Challenge</span>
                                <span class="challenge-desc">10 questions in 60s</span>
                            </button>
                            <button class="challenge-mode-card" id="survival-mode">
                                <span class="challenge-icon">üíÄ</span>
                                <span class="challenge-name">Survival Mode</span>
                                <span class="challenge-desc">3 strikes and out!</span>
                            </button>
                            <button class="challenge-mode-card" id="reverse-quiz">
                                <span class="challenge-icon">üîÑ</span>
                                <span class="challenge-name">Reverse Quiz</span>
                                <span class="challenge-desc">German ‚Üí English</span>
                            </button>
                        </div>
                    </div>

                    <!-- Your Progress Summary -->
                    <div class="progress-summary">
                        <h3 class="summary-title">Your Progress</h3>
                        <div class="summary-grid">
                            <div class="summary-card">
                                <div class="summary-number" id="words-mastered">0</div>
                                <div class="summary-label">Words Learned</div>
                            </div>
                            <div class="summary-card">
                                <div class="summary-number" id="total-quizzes">0</div>
                                <div class="summary-label">Quizzes Done</div>
                            </div>
                            <div class="summary-card">
                                <div class="summary-number" id="accuracy-display">0%</div>
                                <div class="summary-label">Accuracy</div>
                            </div>
                            <div class="summary-card">
                                <div class="summary-number" id="current-level-display">A1</div>
                                <div class="summary-label">Level</div>
                            </div>
                        </div>
                    </div>

                    <!-- Level Selection -->
                    <div class="level-section">
                        <h3 class="level-title">CEFR Level</h3>
                        <div class="level-selector">
                            <button class="level-btn active" data-level="A1">
                                <span class="level-badge">A1</span>
                                <span class="level-name">Beginner</span>
                                <span class="level-words">193 words</span>
                            </button>
                            <button class="level-btn" data-level="A2">
                                <span class="level-badge">A2</span>
                                <span class="level-name">Elementary</span>
                                <span class="level-words">200+ words</span>
                            </button>
                        </div>
                    </div>

                    <!-- Category Selection -->
                    <div class="category-section">
                        <h3 class="category-title">Practice by Category</h3>
                        <div class="category-grid" id="category-grid">
                            <button class="category-pill" data-category="greetings">
                                <span>üëã</span> Greetings
                            </button>
                            <button class="category-pill" data-category="numbers">
                                <span>üî¢</span> Numbers
                            </button>
                            <button class="category-pill" data-category="colors">
                                <span>üé®</span> Colors
                            </button>
                            <button class="category-pill" data-category="family">
                                <span>üë®‚Äçüë©‚Äçüëß</span> Family
                            </button>
                            <button class="category-pill" data-category="animals">
                                <span>üêæ</span> Animals
                            </button>
                            <button class="category-pill" data-category="common_phrases">
                                <span>üí¨</span> Phrases
                            </button>
                            <button class="category-pill" data-category="food">
                                <span>üçé</span> Food
                            </button>
                            <button class="category-pill" data-category="verbs">
                                <span>üèÉ</span> Verbs
                            </button>
                            <button class="category-pill active" data-category="all">
                                <span>üìñ</span> All Words
                            </button>
                        </div>
                    </div>

                </section>

                <!-- Vocabulary Section -->
                <section id="vocabulary" class="section">
                    <div class="section-header">
                        <button class="back-btn" data-section="dashboard">‚Üê Back</button>
                        <h2>Vocabulary</h2>
                        <div class="section-controls">
                            <select id="vocabulary-category">
                                <option value="all">All Categories</option>
                                <option value="greetings">Greetings</option>
                                <option value="numbers">Numbers</option>
                                <option value="colors">Colors</option>
                                <option value="family">Family</option>
                                <option value="food">Food</option>
                                <option value="verbs">Basic Verbs</option>
                            </select>
                            <button class="btn btn-primary" id="start-flashcards">Start Flashcards</button>
                        </div>
                    </div>

                    <div class="vocabulary-stats">
                        <div class="stat-card">
                            <div class="stat-number" id="words-learned">0</div>
                            <div class="stat-label">Words Learned</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="words-reviewing">0</div>
                            <div class="stat-label">Due for Review</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="accuracy-rate">0%</div>
                            <div class="stat-label">Accuracy Rate</div>
                        </div>
                    </div>

                    <!-- Flashcard Interface -->
                    <div class="flashcard-container hidden" id="flashcard-container">
                        <div class="flashcard" id="flashcard">
                            <div class="flashcard-front">
                                <div class="word-german" id="word-german"></div>
                                <button class="btn btn-outline" id="reveal-translation">Show Translation</button>
                            </div>
                            <div class="flashcard-back hidden">
                                <div class="word-english" id="word-english"></div>
                                <div class="word-example" id="word-example"></div>
                                <div class="difficulty-buttons">
                                    <button class="btn btn-error" id="difficulty-hard">Hard</button>
                                    <button class="btn btn-warning" id="difficulty-medium">Medium</button>
                                    <button class="btn btn-success" id="difficulty-easy">Easy</button>
                                </div>
                            </div>
                        </div>
                        <div class="flashcard-progress">
                            <div class="progress-text">
                                Card <span id="current-card">1</span> of <span id="total-cards">10</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="flashcard-progress"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Vocabulary List -->
                    <div class="vocabulary-list" id="vocabulary-list">
                        <!-- Vocabulary items will be populated by JavaScript -->
                    </div>
                </section>

                <!-- Practice Section (Quiz happens here) -->
                <section id="practice" class="section">
                    <div class="section-header practice-header">
                        <button class="back-btn" data-section="dashboard">‚Üê Back</button>
                        <h2>Practice</h2>
                    </div>

                    <div class="writing-exercise" id="writing-exercise">
                        <!-- Exercise content will be populated by JavaScript -->
                    </div>
                </section>

                <!-- Grammar Section -->
                <section id="grammar" class="section">
                    <div class="section-header">
                        <button class="back-btn" data-section="dashboard">‚Üê Back</button>
                        <h2>German Grammar</h2>
                    </div>

                    <div class="grammar-lessons" id="grammar-content">
                        <!-- Grammar Overview Card -->
                        <div class="grammar-intro">
                            <h3>Understanding German Articles</h3>
                            <p>German has three genders for nouns. Learning the article with each word is essential!</p>
                        </div>

                        <!-- Article Cards -->
                        <div class="article-cards">
                            <div class="grammar-card der-card">
                                <div class="article-header">
                                    <span class="article-badge der">der</span>
                                    <h4>Masculine</h4>
                                </div>
                                <p class="article-hint">Male people, professions, days, months, seasons</p>
                                <div class="article-examples">
                                    <span><b class="der-text">der</b> Mann (man) üë®</span>
                                    <span><b class="der-text">der</b> Vater (father) üë®</span>
                                    <span><b class="der-text">der</b> Tisch (table) ü™ë</span>
                                </div>
                            </div>

                            <div class="grammar-card die-card">
                                <div class="article-header">
                                    <span class="article-badge die">die</span>
                                    <h4>Feminine</h4>
                                </div>
                                <p class="article-hint">Female people, -ung, -heit, -keit endings</p>
                                <div class="article-examples">
                                    <span><b class="die-text">die</b> Frau (woman) üë©</span>
                                    <span><b class="die-text">die</b> Mutter (mother) üë©</span>
                                    <span><b class="die-text">die</b> Lampe (lamp) üí°</span>
                                </div>
                            </div>

                            <div class="grammar-card das-card">
                                <div class="article-header">
                                    <span class="article-badge das">das</span>
                                    <h4>Neuter</h4>
                                </div>
                                <p class="article-hint">-chen, -lein diminutives, -um, -ment endings</p>
                                <div class="article-examples">
                                    <span><b class="das-text">das</b> Kind (child) üßí</span>
                                    <span><b class="das-text">das</b> Haus (house) üè†</span>
                                    <span><b class="das-text">das</b> Buch (book) üìö</span>
                                </div>
                            </div>
                        </div>

                        <!-- Grammar Practice Button -->
                        <div class="grammar-cta">
                            <button class="btn btn-primary btn-playful btn-lg" id="start-article-practice">
                                üéØ Practice Articles (der/die/das)
                            </button>
                        </div>

                        <!-- Article Practice Container -->
                        <div id="article-practice-container" class="hidden">
                            <!-- Will be populated by JavaScript -->
                        </div>
                    </div>
                </section>

                <!-- Progress Section -->
                <section id="progress" class="section">
                    <div class="section-header">
                        <button class="back-btn" data-section="dashboard">‚Üê Back</button>
                        <h2>Your Progress</h2>
                    </div>

                    <div class="progress-overview">
                        <div class="progress-card">
                            <h3>Overall Statistics</h3>
                            <div class="stat-grid">
                                <div class="stat-item">
                                    <span class="stat-value" id="total-study-time">0h</span>
                                    <span class="stat-label">Study Time</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-value" id="exercises-completed">0</span>
                                    <span class="stat-label">Exercises Done</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-value" id="current-streak-display">0</span>
                                    <span class="stat-label">Current Streak</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-value" id="longest-streak">0</span>
                                    <span class="stat-label">Best Streak</span>
                                </div>
                            </div>
                        </div>

                        <!-- Progress Map Container -->
                        <div id="progress-map-container" class="progress-map-section">
                            <!-- Will be populated by progress-map.js -->
                        </div>

                        <!-- Enhanced Analytics Container -->
                        <div id="enhanced-stats-container" class="enhanced-stats-section">
                            <!-- Will be populated by analytics.js -->
                        </div>

                        <div class="achievements-section">
                            <h3>Achievements</h3>
                            <div class="achievements-grid" id="achievements-grid">
                                <!-- Achievements will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Settings Section -->
                <section id="settings" class="section">
                    <div class="section-header">
                        <button class="back-btn" data-section="dashboard">‚Üê Back</button>
                        <h2>Settings</h2>
                    </div>

                    <div class="settings-grid">
                        <div class="setting-card">
                            <h3>Learning</h3>
                            <div class="setting-item">
                                <label for="daily-goal">Daily Word Goal</label>
                                <select id="daily-goal">
                                    <option value="5">5 words</option>
                                    <option value="10" selected>10 words</option>
                                    <option value="15">15 words</option>
                                    <option value="20">20 words</option>
                                </select>
                            </div>
                        </div>

                        <div class="setting-card">
                            <h3>Sound & Display</h3>
                            <div class="setting-item">
                                <label class="toggle-label">
                                    <input type="checkbox" id="sound-effects" checked>
                                    <span class="toggle-text">Sound Effects</span>
                                </label>
                            </div>
                            <div class="setting-item">
                                <label class="toggle-label">
                                    <input type="checkbox" id="dark-mode">
                                    <span class="toggle-text">Dark Mode</span>
                                </label>
                            </div>
                        </div>

                        <div class="setting-card">
                            <h3>Data</h3>
                            <button class="btn btn-outline" id="export-progress">Export Progress</button>
                            <label class="btn btn-outline import-btn" for="import-file">
                                Import Progress
                                <input type="file" id="import-file" accept=".json" style="display: none;">
                            </label>
                            <button class="btn btn-error" id="reset-progress">Reset All Progress</button>
                        </div>
                    </div>
                </section>

            </div>
        </main>

        <!-- Bottom Navigation (Mobile-friendly) -->
        <nav class="bottom-nav">
            <button class="nav-item active" data-section="dashboard">
                <span class="nav-icon">üè†</span>
                <span class="nav-label">Home</span>
            </button>
            <button class="nav-item" data-section="vocabulary">
                <span class="nav-icon">üìö</span>
                <span class="nav-label">Words</span>
            </button>
            <button class="nav-item nav-quiz" id="nav-quiz-btn">
                <span class="nav-icon">üéØ</span>
                <span class="nav-label">Quiz</span>
            </button>
            <button class="nav-item" data-section="progress">
                <span class="nav-icon">üìä</span>
                <span class="nav-label">Stats</span>
            </button>
            <button class="nav-item" data-section="settings">
                <span class="nav-icon">‚öôÔ∏è</span>
                <span class="nav-label">Settings</span>
            </button>
        </nav>

        <!-- Footer (hidden on mobile) -->
        <footer class="footer desktop-only">
            <div class="container">
                <div class="footer-content">
                    <div class="footer-main">
                        <p class="footer-title">üá©üá™ <strong>LearnDeutsch</strong></p>
                        <p class="footer-desc">Your fun companion for mastering German vocabulary</p>
                    </div>
                    <div class="footer-attribution">
                        <p class="footer-dev">Developed by <strong>Lucas Nakamura Cerejo</strong></p>
                        <p class="footer-org">NIPE/Unicamp ‚Ä¢ For self-study and language learning</p>
                    </div>
                    <div class="footer-copyright">
                        <p>&copy; 2026 LearnDeutsch. Built with ‚ù§Ô∏è for German learners worldwide.</p>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay hidden" id="loading-overlay">
        <div class="loading-spinner"></div>
        <p>Loading...</p>
    </div>

    <!-- Achievement Modal -->
    <div class="modal hidden" id="achievement-modal">
        <div class="modal-content">
            <button class="modal-close" id="modal-close">&times;</button>
            <div class="achievement-celebration">
                <div class="achievement-icon" id="achievement-icon"></div>
                <h3 id="achievement-title">Achievement Unlocked!</h3>
                <p id="achievement-description"></p>
                <div class="xp-reward">+<span id="achievement-xp">0</span> XP</div>
            </div>
        </div>
    </div>

    <script src="js/utils.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/gamification.js"></script>
    <script src="js/vocabulary.js"></script>
    <script src="js/exercises.js"></script>
    <script src="js/sounds.js"></script>
    <script src="js/interactive.js"></script>
    <script src="js/progress.js"></script>
    <script src="js/progress-map.js"></script>
    <script src="js/analytics.js"></script>
    <script src="js/fun-utils.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
